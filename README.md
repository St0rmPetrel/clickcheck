# clickcheck

**clickcheck** ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ ClickHouse: 
–ü–æ–º–æ–≥–∞–µ—Ç *DBA* –±—ã—Å—Ç—Ä–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –∏—â–µ—Ç —Ç—è–∂–µ–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—à–∏–±–∫–∏.
–í –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–µ –±—É–¥–µ—Ç —Ç–∞–∫–∂–µ –∏—Å–∫–∞—Ç—å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∞–Ω–æ–º–∞–ª–∏–∏, –ø–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏, —Ä–æ—Å—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã.

---

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê–Ω–∞–ª–∏–∑ `query_log`: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ fingerprint
- –ú–Ω–æ–≥–æ—Ñ–æ—Ä–º–∞—Ç–Ω—ã–π –≤—ã–≤–æ–¥: —Ç–µ–∫—Å—Ç, JSON, YAML
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–∫–æ–Ω—Ç–µ–∫—Å—Ç—ã)
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å–æ –≤—Å–µ—Ö –Ω–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö) —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ `clickcheck`

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cargo install clickcheck
```

## ‚öôÔ∏è–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--help` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–µ:

```bash
clickcheck --help
clickcheck queries --help
clickcheck errors --help
clickcheck context --help
```

–ü—Ä–∏–º–µ—Ä

```bash
clickcheck context set profile ch-hello -U 'https://my-ch-hello-node-1:8443' -U 'https://my-ch-hello-node-2:8443' -u 'hello_user' -i
# –í–≤–æ–¥–∏–º ClickHouse hello_user password:
clickcheck context set profile ch-bye -U 'https://my-ch-bye-node-1:8443' -u 'bye_user' -i
# –í–≤–æ–¥–∏–º ClickHouse bye_user password:

# –í—ã—Å—Ç–∞–≤–ª—è–µ–º context –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
clickcheck context set current ch-hello

# –°–º–æ—Ç—Ä–∏–º —Ç–æ–ø 5 —Ç—è–∂–µ–ª—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ ch-hello
clickcheck queries --last 1hour
# –°–º–æ—Ç—Ä–∏–º —Ç–æ–ø 5 –æ—à–∏–±–æ–∫ –Ω–∞ ch-hello
clickcheck errors

# –°–º–æ—Ç—Ä–∏–º —Ç–æ–ø 5 —Ç—è–∂–µ–ª—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ ch-bye
clickcheck queries --last 1hour --context ch-bye
```

---


## üéØ Roadmap

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –ø–ª–∞–Ω–∞—Ö

- ‚ÄúGet‚Äù & ‚ÄúStats‚Äù Subcommands on queries
  - clickcheck queries get <FINGERPRINT>
  - clickcheck queries stats: Single aggregated query
- Advanced Analysis Modes
  - **Unstable queries**: high-variance detection
  - **Burst detection**: spikes in query frequency
  - **Anomaly detection**: statistical outliers, unusual patterns
- Beyond Query Logs
  - **Storage growth**: inspect `system.parts` to find largest tables/partitions and predict growth
  - Merge spikes: analyze system.part_log for merge bursts
- Export Integrations
  - Flamegraph integration: generate per-query flamegraphs or CPU profiles 
